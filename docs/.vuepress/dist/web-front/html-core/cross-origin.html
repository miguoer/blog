<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>跨域问题解决方案 | 工欲善其事 必先利其器</title>
    <meta name="generator" content="VuePress 1.5.3">
    
    <meta name="description" content="Just playing around">
    <link rel="preload" href="/blog/assets/css/0.styles.5dc057b1.css" as="style"><link rel="preload" href="/blog/assets/js/app.d6ea18bb.js" as="script"><link rel="preload" href="/blog/assets/js/2.05342cf1.js" as="script"><link rel="preload" href="/blog/assets/js/24.e2d0b395.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.6bab9eb0.js"><link rel="prefetch" href="/blog/assets/js/11.d66f3db6.js"><link rel="prefetch" href="/blog/assets/js/12.cb9cbf5a.js"><link rel="prefetch" href="/blog/assets/js/13.5d0d5e6c.js"><link rel="prefetch" href="/blog/assets/js/14.197a8e27.js"><link rel="prefetch" href="/blog/assets/js/15.7f6c2eb6.js"><link rel="prefetch" href="/blog/assets/js/16.8066d892.js"><link rel="prefetch" href="/blog/assets/js/17.539b22db.js"><link rel="prefetch" href="/blog/assets/js/18.58f4ec11.js"><link rel="prefetch" href="/blog/assets/js/19.e6606579.js"><link rel="prefetch" href="/blog/assets/js/20.69ddce0f.js"><link rel="prefetch" href="/blog/assets/js/21.a19633c6.js"><link rel="prefetch" href="/blog/assets/js/22.31437ee7.js"><link rel="prefetch" href="/blog/assets/js/23.dcbdb0bf.js"><link rel="prefetch" href="/blog/assets/js/25.438b9b5b.js"><link rel="prefetch" href="/blog/assets/js/26.149a26a2.js"><link rel="prefetch" href="/blog/assets/js/27.d3bc7094.js"><link rel="prefetch" href="/blog/assets/js/28.5e1c6355.js"><link rel="prefetch" href="/blog/assets/js/29.f3128d0e.js"><link rel="prefetch" href="/blog/assets/js/3.4ad4875a.js"><link rel="prefetch" href="/blog/assets/js/30.9915e45e.js"><link rel="prefetch" href="/blog/assets/js/31.d633d186.js"><link rel="prefetch" href="/blog/assets/js/32.743a4fbb.js"><link rel="prefetch" href="/blog/assets/js/33.4564b43a.js"><link rel="prefetch" href="/blog/assets/js/34.3c0b711a.js"><link rel="prefetch" href="/blog/assets/js/4.0bb70dc7.js"><link rel="prefetch" href="/blog/assets/js/5.61bf7090.js"><link rel="prefetch" href="/blog/assets/js/6.f8507797.js"><link rel="prefetch" href="/blog/assets/js/7.89e9ae9d.js"><link rel="prefetch" href="/blog/assets/js/8.08a316a1.js"><link rel="prefetch" href="/blog/assets/js/9.4d8c60d2.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.5dc057b1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">工欲善其事 必先利其器</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/web-front/" class="nav-link router-link-active">
  前端
</a></div><div class="nav-item"><a href="/blog/algorithm/" class="nav-link">
  算法
</a></div><div class="nav-item"><a href="/blog/design-pattern/" class="nav-link">
  设计模式
</a></div><div class="nav-item"><a href="/blog/android/" class="nav-link">
  安卓
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/web-front/" class="nav-link router-link-active">
  前端
</a></div><div class="nav-item"><a href="/blog/algorithm/" class="nav-link">
  算法
</a></div><div class="nav-item"><a href="/blog/design-pattern/" class="nav-link">
  设计模式
</a></div><div class="nav-item"><a href="/blog/android/" class="nav-link">
  安卓
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>HTML核心知识</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/web-front/html-core/html-core.html" class="sidebar-link">LocalStorage扩容</a></li><li><a href="/blog/web-front/html-core/cross-origin.html" aria-current="page" class="active sidebar-link">跨域问题解决方案</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/web-front/html-core/cross-origin.html#浏览器的同源策略" class="sidebar-link">浏览器的同源策略</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/web-front/html-core/cross-origin.html#同源的定义" class="sidebar-link">同源的定义</a></li><li class="sidebar-sub-header"><a href="/blog/web-front/html-core/cross-origin.html#源的继承" class="sidebar-link">源的继承</a></li><li class="sidebar-sub-header"><a href="/blog/web-front/html-core/cross-origin.html#ie特例" class="sidebar-link">IE特例</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/web-front/html-core/cross-origin.html#跨源网络访问" class="sidebar-link">跨源网络访问</a></li><li class="sidebar-sub-header"><a href="/blog/web-front/html-core/cross-origin.html#解决方案" class="sidebar-link">解决方案</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>JavaScript核心知识</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/web-front/js-core/js-core.html" class="sidebar-link">变量提升&amp;函数提升</a></li><li><a href="/blog/web-front/js-core/this.html" class="sidebar-link">this</a></li><li><a href="/blog/web-front/js-core/closure.html" class="sidebar-link">闭包</a></li><li><a href="/blog/web-front/js-core/call&amp;apply.html" class="sidebar-link">call &amp; apply</a></li><li><a href="/blog/web-front/js-core/prototype.html" class="sidebar-link">原型链</a></li><li><a href="/blog/web-front/js-core/reference.html" class="sidebar-link">易错点</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>前端工程化</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/web-front/engineering/engineering.html" class="sidebar-link">工程化入门</a></li><li><a href="/blog/web-front/engineering/build-tools.html" class="sidebar-link">常见构建工具</a></li><li><a href="/blog/web-front/engineering/git.html" class="sidebar-link">Git版本控制</a></li><li><a href="/blog/web-front/engineering/ci-cd.html" class="sidebar-link">CI&amp;CD</a></li><li><a href="/blog/web-front/engineering/quality.html" class="sidebar-link">代码质量管理</a></li><li><a href="/blog/web-front/engineering/test.html" class="sidebar-link">自动化测试</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>前端性能优化</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/web-front/performance/performance.html" class="sidebar-link">性能调试和性能指标分析</a></li><li><a href="/blog/web-front/performance/promote-deep.html" class="sidebar-link">优化原理</a></li><li><a href="/blog/web-front/performance/webpack-promote.html" class="sidebar-link">Webpack4优化</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>框架源码理解</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/web-front/framework/framework.html" class="sidebar-link">Vue2源码</a></li><li><a href="/blog/web-front/framework/framework-vue3.html" class="sidebar-link">Vue3源码</a></li><li><a href="/blog/web-front/framework/framework-react.html" class="sidebar-link">React源码</a></li><li><a href="/blog/web-front/framework/framework-redux.html" class="sidebar-link">Redux源码</a></li><li><a href="/blog/web-front/framework/framework-vuex.html" class="sidebar-link">Vuex源码</a></li><li><a href="/blog/web-front/framework/framework-webpack4.html" class="sidebar-link">Webpack4源码</a></li><li><a href="/blog/web-front/framework/framework-webpack5.html" class="sidebar-link">Webpack5源码</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="跨域问题解决方案"><a href="#跨域问题解决方案" class="header-anchor">#</a> 跨域问题解决方案</h1> <p>浏览器的同源策略是产生跨域问题的原因.</p> <h2 id="浏览器的同源策略"><a href="#浏览器的同源策略" class="header-anchor">#</a> 浏览器的同源策略</h2> <p>同源策略是一个重要的安全策略，它用于限制一个origin的文档或者它加载的脚本如何能与另一个源的资源进行交互。它能帮助阻隔恶意文档，减少可能被攻击的媒介。</p> <h3 id="同源的定义"><a href="#同源的定义" class="header-anchor">#</a> 同源的定义</h3> <p>如果两个 URL 的 protocol、port (如果有指定的话)和 host 都相同的话，则这两个 URL 是同源。</p> <h3 id="源的继承"><a href="#源的继承" class="header-anchor">#</a> 源的继承</h3> <p>在页面中通过 about:blank 或 javascript: URL 执行的脚本会继承打开该 URL 的文档的源，因为这些类型的 URLs 没有包含源服务器的相关信息。</p> <h3 id="ie特例"><a href="#ie特例" class="header-anchor">#</a> IE特例</h3> <p>IE 的同源策略有两个主要的差异点：</p> <ul><li>授信范围（Trust Zones）：两个相互之间高度互信的域名，如公司域名（corporate domains），则不受同源策略限制。</li> <li>端口：IE 未将端口号纳入到同源策略的检查中，因此 https://company.com:81/index.html 和 https://company.com/index.html  属于同源并且不受任何限制。</li></ul> <h2 id="跨源网络访问"><a href="#跨源网络访问" class="header-anchor">#</a> 跨源网络访问</h2> <p>同源策略控制不同源之间的交互,一般交互分为三类:</p> <ul><li>跨域写操作（Cross-origin writes）一般是被允许的。例如链接（links），重定向以及表单提交。特定少数的HTTP请求需要添加 preflight。</li> <li>跨域资源嵌入（Cross-origin embedding）一般是被允许（后面会举例说明）。</li> <li>跨域读操作（Cross-origin reads）一般是不被允许的.</li></ul> <p>通常向后台请求数据,如果前端的域名和后台服务的域名不在同一个域名下,就属于跨域读操作.</p> <h2 id="解决方案"><a href="#解决方案" class="header-anchor">#</a> 解决方案</h2> <ol><li>后台设置允许跨域访问</li></ol> <p>Spring Boot项目中,在Applicaiton中设置  <code>Access-Control-Allow-Origin</code></p> <ol start="2"><li>前端架设BFF层</li></ol> <p>前端使用Node架设一层BFF, 代理所有的后台请求.由于Node服务和静态资源处于同一个域名下,因此一定不会出现跨域. Node后台向Java后台请求,响应时间在几十ms以内, 影响几乎可以忽略. BFF层所带来的收益比这多出来的几十ms要大很多.</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新时间:</span> <span class="time">8/23/2020, 2:14:55 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/web-front/html-core/html-core.html" class="prev">
        LocalStorage扩容
      </a></span> <span class="next"><a href="/blog/web-front/js-core/js-core.html">
        变量提升&amp;函数提升
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.d6ea18bb.js" defer></script><script src="/blog/assets/js/2.05342cf1.js" defer></script><script src="/blog/assets/js/24.e2d0b395.js" defer></script>
  </body>
</html>
